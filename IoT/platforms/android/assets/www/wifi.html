<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<head>

	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/jquery.blockUI.min.js"></script>
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript"
			src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }"></script>
	<script type="text/javascript" src="cordova_plugins.js"></script>
	<link href="lib/ionic/css/ionic.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/wifi.css">
	<script type="text/javascript" src="js/mqttws31.js"></script>
	<script type="text/javascript" src="js/graphgenerator.js"></script>
	<script type="text/javascript" src="js/thresholdAlert.js"></script>

</head>
<body>

<div class="bar bar-header bar-dark">

	<a href = "ui.html"><button class="button button-clear button-light ion-android-arrow-back"></button></a>
	<h1 class="title">Wifi Devices</h1>
	<a class="button button-right button-clear button-light ion-gear-a" href = "settings.html"></a>
	<!--<button id="btn_settings" class="button button-right button-clear button-light ion-gear-a" ><a href = "settings.html"></a></button> -->

</div>

<br>
<br>
<br>

<div id="wifi_start">
	<a>
		<button id = "btn_start" class="button button-clear button-dark ion-power" onclick="start()">
			Start
		</button>
	</a>
</div>

<div id="wifi_stop">
	<a>
		<button id = "btn_stop" class="button button-clear button-dark ion-android-hand" onclick="stop()">
			Stop
		</button>
	</a>
</div>

<br>
<!--<h3 id="fHeader"></h3><br>
<p id = "test"></p>
<p id="sub"></p>
</div>-->

<div id="wifi_list" class="card">
	<div class="item item-divider bar bar-header bar-dark">
		Real Time Data
	</div>
	<div class="item item-text-wrap">
		<p id="forceX">Force X: 0 Nm</p>
		<span id="xAlert" class="badge badge-assertive"></span>
	</div>

	<div class="item item-text-wrap">
		<p id="forceY">Force Y: 0 Nm</p>
		<span id="yAlert" class="badge badge-assertive"></span>
	</div>

	<div class="item item-text-wrap">
		<p id="forceZ">Force Z: 0 Nm</p>
		<span id="zAlert" class="badge badge-assertive"></span>
	</div>
</div>

<div class = "graph", id="curve_chart" style="width: 340px; height: 200px">
</div>

<div class="tabs-striped tabs-background-dark tabs-color-light">
	<div class="tabs">
		<a class="tab-item active" href="wifi.html">
			<i class="icon ion-wifi"></i>
			Wifi
		</a>
		<a class="tab-item" href="bluetooth_python.html">
			<i class="icon ion-bluetooth"></i>
			Bluetooth
		</a>
		<a class="tab-item" href="opcua.html">
			<i class="icon ion-shuffle"></i>
			OPCUA
		</a>
	</div>
</div>

<script>

	  var currentForce = 0;
	  var i1 = 0;
	  var j1 = 0;
	  var k1 = 0;
	  var l1 = 0;
	  var m1 = 0;
	  var n1 = 0;
	  var o1 = 0;

	  var i2 = 0;
	  var j2 = 0;
	  var k2 = 0;
	  var l2 = 0;
	  var m2 = 0;
	  var n2 = 0;
	  var o2 = 0;

	  var i3 = 0;
	  var j3 = 0;
	  var k3 = 0;
	  var l3 = 0;
	  var m3 = 0;
	  var n3 = 0;
	  var o3 = 0;

	  var chart = null;

	//	drawChart();
    google.setOnLoadCallback(drawChart);
	function drawChart() {
          data = google.visualization.arrayToDataTable([
          ['time', 'Force X', 'Force Y', 'Force Z'],
          ['-21 sec', 0, 0, 100],
          ['-18 sec', 0, 100, 0],
          ['-15 sec', 100, 0, 150],
          ['-12 sec', 0, 200, 300],
          ['-9 sec', 50, 100, 100],
          ['-6 sec', 175, 20, 500],
          ['-3 sec', 0, 600, 400],
          ['current', 100, 300, 0]
        ]);
         options = {
         title: 'Data from the Intelligent device',
         curveType: 'function',
         legend: { position: 'bottom' }
         };
         chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
         chart.draw(data, options);
    }


	  function start() {
                MqttPlugin.subscribe({topic: "$EDC/tum/B8:27:EB:A6:A9:8A/SOCKET-V1/data"});
				MqttPlugin.publish({
				topic:"$EDC/tum/B8:27:EB:A6:A9:8A/SOCKET-V1/EXEC/start",
				data:"Mqtt data"

				});
			}

			function stop() {

				MqttPlugin.publish({
				topic:"$EDC/tum/B8:27:EB:A6:A9:8A/SOCKET-V1/EXEC/stop",
				data:"Mqtt data"

				});
			}






    </script>
</body>
</html>
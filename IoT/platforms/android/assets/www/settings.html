<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<head>

    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/jquery.blockUI.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="cordova_plugins.js"></script>
    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/wifi.css">
    <script type="text/javascript" src="js/mqttws31.js"></script>

</head>

<body>
<div class="bar bar-header bar-dark">

    <a href = "mainsettings.html"><button class="button button-clear button-light ion-android-arrow-back"></button></a>
    <h1 class="title">MQTT Settings</h1>
    <a class="button button-right button-clear button-light ion-home" href = "ui.html"></a>
    <!--<button id="btn_settings" class="button button-right button-clear button-light ion-gear-a" ><a href = "settings.html"></a></button> -->

</div>

<br>
<br>
<br>

<div class="list card">

    <a href="#" class="item item-icon-left">
        <i class="icon ion-cloud" onclick="updateHost()"></i>
        Enter host address
    </a>

    <a href="#" class="item item-icon-left">
        <i class="icon ion-usb" onclick="updatePort()"></i>
        Enter port number
    </a>

    <a href="#" class="item item-icon-left">
        <i class="icon ion-android-person" onclick="updateClient()"></i>
        Enter client id
    </a>

    <a href="#" class="item item-icon-left">
        <i class="icon ion-email" onclick="updateUser()"></i>
        Enter username
    </a>

    <a href="#" class="item item-icon-left">
        <i class="icon ion-key" onclick="updatePassword()"></i>
        Enter password
    </a>

</div>

<div class="list">
    <a href="index.html">

        <button class="button button-block button-dark">
            UPDATE
        </button>


    </a>


</div>


<script>

    function updateHost(){

        var hostName=prompt("Please enter the host name","");
        if (hostName!=null) {
            var db = window.sqlitePlugin.openDatabase({name: "myanother.db"});
            db.transaction(function(tx) {
                tx.executeSql("UPDATE test_table SET host=? where id=1;", [hostName], function(tx, res) {
                len1 = res.rows.length;
                //alert(hostName);
                });
            },
            function() {
                console.log('transaction ok');
                db.close(function() {
                console.log('database is closed ok');
                });
            },
            function(e) {
                console.log("ERROR: " + e.message);
                db.close();
            });
        };
    }

    function updatePort(){

        var portNumber=prompt("Please enter the port number","");
        if (portNumber!=null) {
            var db = window.sqlitePlugin.openDatabase({name: "myanother.db"});
            db.transaction(function(tx) {
                tx.executeSql("UPDATE test_table SET port=? where id=1;", [portNumber], function(tx, res) {
                len1 = res.rows.length;
                //alert(portNumber);
                });
            },
            function() {
                console.log('transaction ok');
                db.close(function() {
                console.log('database is closed ok');
                });
            },
            function(e) {
                console.log("ERROR: " + e.message);
                db.close();
            });
        };
    }

    function updateClient(){

        var clientId=prompt("Please enter the client id","");
        if (clientId!=null) {
            var db = window.sqlitePlugin.openDatabase({name: "myanother.db"});
            db.transaction(function(tx) {
                tx.executeSql("UPDATE test_table SET client_Id=? where id=1;", [clientId], function(tx, res) {
                len1 = res.rows.length;
                //alert(clientId);
                });
            },
            function() {
                console.log('transaction ok');
                db.close(function() {
                console.log('database is closed ok');
                });
            },
            function(e) {
                console.log("ERROR: " + e.message);
                db.close();
            });
        };
    }

    function updateUser(){

        var userName=prompt("Please enter the user name","");
        if (userName!=null) {
            var db = window.sqlitePlugin.openDatabase({name: "myanother.db"});
            db.transaction(function(tx) {
                tx.executeSql("UPDATE test_table SET user_Name=? where id=1;", [userName], function(tx, res) {
                len1 = res.rows.length;
                //alert(userName);
                });
            },
            function() {
                console.log('transaction ok');
                db.close(function() {
                console.log('database is closed ok');
                });
            },
            function(e) {
                console.log("ERROR: " + e.message);
                db.close();
            });
        };
    }

    function updatePassword(){

        var password1=prompt("Please enter the new password","");
        if (password1=="") {
            //alert("You must type in a password");
            exit();
        };
        if (password1!="") {
            var db = window.sqlitePlugin.openDatabase({name: "myanother.db"});
            db.transaction(function(tx) {
                tx.executeSql("UPDATE test_table SET pwd=? where id=1;", [password1], function(tx, res) {
                len1 = res.rows.length;
                });
            },
            function() {
                console.log('transaction ok');
                db.close(function() {
                console.log('database is closed ok');
                });
            },
            function(e) {
                console.log("ERROR: " + e.message);
                db.close();
            });
        }
        else {

            //alert("Passwords do not match. Please try again.");
            exit();
        };
    }


</script>
</body>
</html>